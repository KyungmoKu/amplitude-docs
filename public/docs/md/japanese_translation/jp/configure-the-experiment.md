---
id: a586d4e2-e230-4f3a-8eef-dc327ca685d4
blueprint: japanese_translation
title: 実験を構成する
title_en: 'Configure the experiment'
source: 'https://help.amplitude.com/hc/ja/articles/360061270372'
---
|  |
| --- |
| この記事のテーマ：* 実験をハウス化する**デプロイメント**を作成する
* 実験に使用するSDKをインストールする
 |

実験を作成する最初のステップは、それを構成することです。構成は簡単で、2ステップのプロセスです：最初にデプロイメントを作成し、その後、使用するSDKをインストールします。

## デプロイメントを作成する

Amplitude Experimentでは、デプロイメントはコード実行のための複数のフラグまたは実験に役立つ環境を意味します。デプロイメントを作成したら、Experimentはアクセスキーを生成します。これを使用してフラグと実験を適切にルーティングすることができます。

デプロイメントは、Amplitude Analyticsのプロジェクトで実行されます。プロジェクトには複数のデプロイメントがありますが、各デプロイメントは1つのプロジェクトにのみ追加できます。

デプロイメントを作成するには、次のステップに従ってください。

1. Experiment内から、左側のレールで*[デプロイメント]*をクリックします。次に*[+ Add Deployment]（デプロイメントを追加）をクリックします。*
2. このデプロイメントを関連付けたいAmplitude Analyticsプロジェクトを選択します。複数のプロジェクトで一度にデプロイメントを作成する場合は、ドロップダウンリストから、関連するすべてのプロジェクトを選択します
3. 次に、デプロイメントの名前を選択し、そのタイプを指定します：

* * * * **クライアント側：**デプロイメントは、ウェブブラウザまたはモバイルアプリなどのクライアントデバイスで実行されます。クライアントのデプロイメントに関連付けられたデプロイメントキーは公に表示され、クライアント側のSDKで使用する必要があります。
				* **サーバー側：**これらのデプロイメントは、Webサーバーまたはバッチ処理システムなどの、コントロールするサーバーで実行されますサーバーデプロイメントに関連付けられたデプロイメントキーは非公開にし、サーバー側のSDKで使用します。サーバー側のキーは、フラグ評価のREST APIにアクセスできます。本格的な実験を行うのではなく、REST APIを使用してフラグを評価するだけの場合は、サーバー側の環境を作成する必要があります。

4. *[Add Deployment]*（デプロイメントを追加）をクリックします。Amplitude Experimentは、デプロイメントを作成し、コピーおよび使用するキーを自動的に生成します。

## SDKをインストールする

REST APIを使用する予定がない場合は、次のステップは、SDKをインストールすることになります。各SDKには、異なるインストール手順があります。次のリンクをクリックして確認してください。

* [ブラウザJS（クライアント）](https://amplitude-lab.readme.io/docs/javascript-client-sdk)
* [ノードJS（サーバー）](https://amplitude-lab.readme.io/docs/javascript-server-sdk)
* [Android（クライアント）](https://amplitude-lab.readme.io/docs/android-sdk)
* [iOS（クライアント）](https://amplitude-lab.readme.io/docs/ios-sdk)
* [React Native（クライアント）](https://amplitude-lab.readme.io/docs/react-native-sdk)

すべてのSDKは、Amplitude Experimentにリクエストを送信し、特定のユーザーにどのフラグ構成を行うかを決定します。とはいえ、クライアント側とサーバー側のSDKには、注意すべき重要な違いがあります。

**クライアント側**のSDKは、エンドユーザーアプリケーションデプロイメントで実行するものです。クライアント側とサーバー側の間で選択する場合、クライアント側のSDKでは次のことに留意してください。

* 1つのユーザーのデプロイメントを想定する
* クライアント側のデプロイメントキー（**公開鍵**で、エンドユーザーに**表示される）を使用する**
* 特定のユーザーの前でバリアントをフェッチする
* オフラインモードでクライアントにバリアントをローカルで保存する

一方、**サーバー側**のSDKは、サーバーデプロイメントで実行するものです。サーバー側のSDKでは次のことに留意してください。

* マルチユーザーのデプロイメントを想定する
* サーバー側のAPIキー（秘密鍵）を使用する
* 各リクエストでバリアントをフェッチする

## ユーザーコンテキスト

バリアントを割り当てるとき、評価エンジンは、ユーザーコンテキストオブジェクトにターゲティングルールを適用します。このオブジェクトは、個々のユーザーのアイデンティティを表します。クライアント側のSDKでは、このオブジェクトユーザー関係は初期化に設定され、バリアントのすべてのリクエストでサーバーに渡されます。サーバー側のSDKでは、ユーザーが変更される可能性があり、すべてのリクエストで設定する必要があります。

個々のユーザーをターゲットにバリアントを割り当てる場合、Experimentは、リストされたユーザーID（`user_id`）またはデバイスID（`device_id`）でマッチングします。ルールベースのユーザーセグメントを使用すると、定義済みのプロパティ（国、プラットフォームなど）、またはuser\_propertyオブジェクトで指定されたカスタムプロパティでマッチングします。

JSON:

```
{  "user\_id": "Amplitude User ID"  
    
: "Amplitude Device ID",    
: "Country",  
"region": "Region",  
"city": "City",  
  "dma": "DMA"  
"language": "Language"  
  "platform": "Platform"  
  "version":   
,  "device\_family":   
,  "device\_type"  
"Device Type",  "carrier": "Carrier",    
: {      
  
```

**注意：**Amplitude Analyticsにデータを送信するために使用するAmplitude Experimentには、同じユーザー識別子（デバイスIDとユーザーID）を使用する必要があります。この方法で、アイデンティティが正しく解決され、生成されたデータはAnalyticsで同じユーザーと正しく関連付けられます。
