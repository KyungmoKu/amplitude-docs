---
id: 80600280-015c-4ea7-a239-f1f6029e7cce
blueprint: japanese_translation
title: ポートフォリオ：Amplitudeでクロスプロジェクト分析を実施する
title_en: 'Portfolios: Conduct cross-project analysis with Amplitude'
source: 'https://help.amplitude.com/hc/ja/articles/360002750712'
---
#### この記事のテーマ：

* 複数のプロダクトにわたるユーザーの行動を表示し、理解する
* プロダクト全体で複数のユーザーIDでユーザーを調整する

Amplitudeのポートフォリオアドオンでは、ユーザーが**プロダクトポートフォリオ全体**とどのようにやり取りするかについて、簡単に全体像を生成できます。 複数のプラットフォームまたはプロダクトラインをインストルメントした場合、ポートフォリオはユーザーの完全なジャーニーについて比類のないインサイトを提供できます。

**注：**この機能は、グロースプランまたはエンタープライズプランのポートフォリオアドオンを購入したお客様が利用できます。 また、開始する前に、Amplitude内の[プロジェクト設定](/docs/admin/account-management/manage-orgs-projects)を必ず理解する必要があります。

## 仕組み

クロスプロダクト分析を作成するポートフォリオの能力の基礎は、**ビュー**です。 ビューは、Amplitudeプロジェクトのコレクションまたはデータソースであり、各プロジェクトの進捗を1つのディスプレイに統合します。 ビューは、1つ以上のデータソースの集まりであり、それぞれが複数のプロジェクトにわたって一度にユーザーを分析できます。 

**注：**ビューは、データ自体は取り込むことはできませんが、いつでも変更して更新できます。

ポートフォリオは、個々のプロジェクトに基づいてサイロ化するのではなく、組織全体のユーザーを表示します。 Amplitudeは、異なるプロジェクトで同じユーザーID（またはデバイスID）が表示された場合、同じユーザーに接続されていると仮定します。

ただし、ユーザープロパティはプロジェクトご**と**にサイロ化されます。特定のプロジェクトでトリガーされたイベントのユーザープロパティは、そのプロジェクトのユーザープロパティ値であり、**そのプロジェクトのみ**です。例として、iOSとAndroidの2つのプロジェクトがあるとします。 ユーザー`example@amplitude.com`には、iOSプロジェクトで1.0の値、Androidプロジェクトで2.0の値を持つ`Version`というユーザープロパティがあります。この場合、iOSプロジェクトでこのユーザーがトリガーしたイベントは、`Version`の値が1.0に設定され、Androidプロジェクトでトリガーしたイベントは、`Version`の値が2.0に設定されます。

**注：**イベントタイプが2つ以上のプロジェクトで同じ名前である場合、ドロップダウンで同じイベントと見なされます。

## ポートフォリオを作成する

組織の管理者とマネージャーは![gear_icon_for_settings.png](/docs/output/img/jp/gear-icon-for-settings-png.png)、*プロジェクト > ポートフォリオビュー*の作成をクリックして移動することにより、ポートフォリオビューにアクセスして作成できるようになります。 モーダルが表示されます。その中で、ポートフォリオビューに名前を付け、ユーザー権限を設定できます。

この時点で、このクロスプロジェクトビューに複数のプロジェクトを接続できます。*ソースプロジェクト*を更新をクリックして、単一のビューに統合するプロジェクトを選択します。

## ユーザーマッピング（エイリアシング）

同じユーザーのユーザーIDが同じ組織内のプロジェクト間で異なることは珍しくありません。ユーザーマッピングAPIエンドポイントでは、Amplitudeの異なるユーザーIDでトラックされる2人のユーザーをマージできます。これは、UIを介して**行うことができず**、APIコールとしてのみ利用できることに注意してください。

下の例では、3つのユーザーレコード（それぞれが異なるユーザーIDを持つ）はすべて、ユーザーID、`mike@hooli.com`にマージされます。この新しいユーザーIDは、クロスプロジェクトビューのユーザーの「地球規模の」ユーザーIDです。このようにして、プロダクトポートフォリオ全体のユニークユーザー数を正確にカウントできます。

![](/docs/output/img/jp/360003724891)

ユーザーがマッピングされる場合、ユーザープロパティは**マージされません**。これは、各イベントに添付されたユーザープロパティが、最初にイベントをトリガーした元のユーザーであることを意味します。

2つのリクエストパラメータで、<https://api.amplitude.com/usermap>にPOSTまたはGETリクエストを送信することで、現在のAPIエンドポイントにアクセスできます： 

* **api\_key：**組織内のプロジェクト（データソース）のAPIキー
* **マッピング：**単一のJSONマッピングオブジェクトまたはJSONオブジェクトの配列。それぞれが単一のマッピングを表します

マッピングエイリアスは、`user_id`キーを持つ必要があります。`unmap`が`True`に設定されている場合、`global_user_id`は存在できません。 そうでなければ、`global_user_id`が存在する必要があります：

* **user\_id（文字列）：**必須。ユーザーが指定したUUID（ユニークユーザーID）。 これは、マッピングされるユーザーです。 一度に1つの`user_id`のみマッピングできることに注意してください。
* **global\_user\_id（文字列）：** `unmap`がtrueでない限り必須。ユーザーが指定したUUID（ユニークユーザーID）。 これは、もう1つの`user_id`がマップする統一されたアイデンティティになります。
* **unmap（ブール値）：** trueの場合、`user_id`の現在のマッピングが削除されます。

### ユーザーマッピング例

```
curl --data 'api\_key=**YOUR\_API\_KEY**' --data mapping='[{"user\_id":"63629@hmail.com", "global\_user\_id": "mike@hooli.com"}]' [https://api.amplitude.com/](https://api.amplitude.com/alias)usermap
```

ここで、ユーザー`63629@hmail.com`は、`mike@hooli.com`にマージされます。

### ユーザーアンマッピング例

```
curl --data 'api\_key=**YOUR\_API\_KEY**' --data mapping='[{"user\_id":"63629@hmail.com", "unmap": true}]' [https://api.amplitude.com/](https://api.amplitude.com/alias)usermap
```

ここで、ユーザー`63629@hmail.com`は、正規ユーザー（以前は`mike@hooli.com`として設定されていた）からマージが解除されます。
