---
id: c337fff8-aa3a-4cd8-a895-28cb469baa90
blueprint: japanese_translation
title: ブランチと環境
title_en: 'Branches and environments'
source: 'https://help.amplitude.com/hc/ja/articles/5078713391387'
---
#### この記事のテーマ：

* トラッキングプランの新しいブランチを作成し、作業する
* 作業を`メイン`ブランチに統合する
* 役に立たなくなった古いブランチを削除する

複数のチームが同時にトラッキングプランを変更し、変更をテストする場合、互いの作業を誤って元に戻さないように、確実に実行することが課題です。Amplitude Dataでは、これらの並行した取り組みを調整するのではなく、各チームが **ブランチ**と呼ばれる独立した作業エリアを作成することができます。

Gitに精通している場合は、Amplitude Dataのブランチは慣れ親しんだもです。ブランチは、チームのために作成されたある時点でのトラッキングプランのスナップショットのようなものです。他のユーザーには変更を表示せず、準備ができたら、メインのトラッキングプランに統合することができます。

最初にAmplitude Dataアカウントを作成する際、自動的に`メイン`と呼ばれるデフォルトのブランチが作成されます。これには、いくつかのサンプルイベントとプロパティが含まれ、始めやすくなっています。`メイン`ブランチを本番ブランチと考えてください。最新の公式トラッキングプランが含まれ、Gitのデフォルトブランチ（通常は`マスター`または`メイン`）で現在インストルメント化されているものと一致します。

`メイン`はAmplitude Dataを始めるのに最適で、しばらくの間は唯一の必要なブランチであると理解できます。

## トラッキングプランのバージョンを公開する

ブランチで行った変更（`メイン`ブランチ、後に作られた自分のブランチに関わらず）は、最初はブランチのステージング領域に保**留され続けます**。保留中の変更は、進行中の作業中の変更のようなものです。チームメイトには見えるものの、本番システムからは隠れており、エンジニアリングチームの計測には利用されません。

保留中の変更の準備が完了したら、**公開**します。変更を公開すると、トラッキングプランの新しいバージョンが作成され、変更が適用されます。また、計測のために、その新バージョンをエンジニアリングチームに公開します。新しいバージョンがメインブランチで作成された場合は、変更は本番システムにも伝わります。

すべての新しいバージョンは、バージョン番号とオプションの説明が割り当てられ、後で見分けることができます。バージョン番号は、1から始まり、新しいものを公開するたびに1ずつ増えます。

各ブランチには、独自のトラッキングプランのバージョンがあります。つまり、同じバージョン番号の2つができる可能性があります。1つは`メイン`、もう1つはブランチの番号です。この際、混乱を避けるため、Amplitude Dataは常にブランチの名前を表示します。

## 環境を意識する

どのフィルタリング環境（*本番*、*開発*、*ステージング）*でも、下の画像のように、ステータスとフィルタでさらに分けられた環境でも、トラッキングプランを変更することができます。アクションが取られなかった環境で作業するときは、どの変更が維持されるか、維持されないかを理解することが重要です。

![tracking_plan_env_updates.png](/docs/output/img/jp/tracking-plan-env-updates-png.png)

イベント、プロパティ、グループの作成、更新、削除は、オブジェクトが存在するすべての環境に適用されます。ブロックや変換などの他のすべてのアクションは、環境に固有のものとなります。

次の表は、実行されたフィルタリング環境のみでのアクションか、すべての環境で持続するアクションかを表しています。

すべての環境で持続するアクションは次のとおりです。

* イベント、プロパティ、グループを作成する
* イベント、プロパティ、グループの更新（可視性とアクティビティステータスの変更を含む）
* イベント、プロパティ、グループを削除する

アクションされたフィルタリング環境でのみ持続するアクションは次のとおりです。

* ブロックフィルタまたはドロップフィルタを適用する
* イベント、プロパティ、グループをブロックする
* カスタムイベントが含まれるアクション
* 派生プロパティが含まれるアクション
* プロパティのルックアップが含まれるアクション
* 変換が含まれるアクション

**注**：作業中のブランチと設定により、変更を保存、承認、統合する方法が決定します。 たとえば、`メイン`ブランチで許可される変更は、設定によって異なりますが、保存されると自動的に適用されます。ブランチでの作業の[詳細を読む](/docs/data/work-with-branches)。

![main_branch.png](/docs/output/img/jp/main-branch-png.png)

## ブランチの作成と削除

チームでAmplitude Dataの使用が増加するにつれて、`メイン`ブランチをしのぎ、より堅牢なワークフローが必要になる場合があります。これは通常、次の場合に発生します。

* 多くの人が同時に`メイン`に変更を加えている、または
* フィーチャーチームが共同作業を行い、作業を確認し、ステークホルダーの承認を得るため、別々のトラッキングプランを持ちたがる

Amplitude Dataでは、すべてのブランチが`メイン`から作成され、`メイン`に統合されます。

新しいブランチを**作成**するには、次のステップに従ってください:

1. ページのヘッダーで*メイン*をクリックします。
2. 作成するブランチの名前を入力します。
3. *+*をクリックします。

![create_branch.png](/docs/output/img/jp/create-branch-png.png)

4. ブランチを*作成する*モーダルで、ブランチの名前を確認し、オプションの説明を追加し、*[作成]*をクリックします。

![スクリーンショット](/docs/output/img/jp/sukurinsiyotuto.png)

`メイン`で保留中の変更があった場合は、新しいブランチに変更を加えるか、`メイン`で残すかのいずれかを選ぶことができます。

ブランチ名の横にある![スクリーンショット](/docs/output/img/jp/sukurinsiyotuto.png)をクリックして、ブランチを**削除**します。

![スクリーンショット](/docs/output/img/jp/sukurinsiyotuto.png)

表示されるモーダルで、*[削除]*をクリックして、選択を確認します。

## ブランチで作業する

ブランチが作成されると、ブランチでの作業は、`メイン`で作業するのと同じになります。その場所にチームが新しいバージョンを作成して公開し、それらのバージョンをプロダクトにインストルメント化し、インストルメンテーションのステータスでブランチに報告を戻します。

これはすべて、他のチームが自分のブランチで作業するのと並行して行うことができ、影響を受けることはありません。

ブランチを作成してから`メイン`に変更があった場合は、時々自分のブランチを更新します。Amplitude Dataが`メイン`と比べブランチが古くなっていることを検出すると、ページのツールバーに*更新*ボタンが表示されます。クリックすると更新できます。

## ブランチをメインに統合する

ブランチで行った変更がうまくいったら、`メイン`に統合します。これは通常、プロダクトチームもGitの`メイン`ブランチに変更を統合する準備ができている場合に行います。

正しく統合する前に、いくつか対応すべき前提条件があります。

* 保留中の変更はすべて、ブランチで公開する必要があります。
* ブランチは、`メイン`と同様に最新である必要があります。
* `メイン`は、保留中の変更もすべて公開する必要があります。

ブランチ上の新しいバージョン変更を公開するには、次のステップに従ってください。

1. 左側のサイドバーで、*[変更を保存]*をクリックします。
2. *[変更を保存]*モーダルで、保留中の変更を確認します。すべてを確認したら、*[保存]*をクリックします。

統合するには、次のステップに従ってください。

1. *[アクティビティ]*に移動します。*[更新]*をクリックする必要がある場合があります。
2. *[承認]*をクリックします。
3. *[統合]*をクリックします。

アカウントが[チームの確認用](/docs/data/amplitude-data-settings)に設定されている場合、直接統合する権限がない場合があります。統合リクエストは、チーム外のステークホルダーが変更を確認し、明確な承認を与えることを依頼する方法です。[マネジャー]または[管理者]権限を持つチームメンバーのみが、変更を承認できます。Amplitude Dataにログインし、ページのツールバーの*[統合]*をクリックします。

承認された統合リクエストで、チームの誰でも統合できるようになりました。
