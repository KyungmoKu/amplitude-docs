---
id: 92b2622f-dcd7-4236-be3f-24cc7e315158
blueprint: japanese_translation
title: ヒストリカルカウント：各ユーザーアクションの異なるインスタンスのユーザー行動をトラックする
title_en: 'Historical Counting: Track user behavior for different instances of each user action'
source: 'https://help.amplitude.com/hc/ja/articles/360040957432'
---
#### この記事のテーマ：

* ユーザーアクションの*N*番目のインスタンスをピンポイントする
* クリティカルアクションを実行した回数に基づいて顧客を特定する
* 行動コホートにヒストリカルカウントを組み込む

Amplitudeのヒストリカルカウント機能は、ユーザーがなぜリテンション、コンバージョン、エンゲージメントを行っているのか、なぜそれを失敗しているのかを調査する際に、より深く理解するのに役立ちます。

例えば、アプリ内購入を1回行ったユーザーと、2～3回行ったユーザーでは、コンバージョンとリテンション率が大きく異なることに気づいていますか？

ヒストリカルカウントでは、ユーザーアクション（**5**番目まで）の各*N*インスタンスをすぐにキャプチャできます。 これは、初めてのユーザーの摩擦領域を迅速に特定して解決するのに役立ち、全体的なノーススター指標を押し上げます 

eコマースプラットフォームで購入を完了したり、音楽ストリーミングアプリで曲を再生するなど、プロダクトでクリティカルアクションを行った回数に基づいて最高の顧客を特定することもできます。 

例えば、プロダクトが音楽ストリーミングプラットフォームである場合、ヒストリカルカウントは、`Play Song`イベントを初めて実行したユーザーと複数回実行したユーザーとの使用の違いを強調できます。 

**注：**ヒストリカルカウントは、Amplitudeの行動コホートと同じではありません。 ただし、行動コホートでヒストリカルカウントを使用できます。 詳細については、[このセクションを参照](#h_01FDX4DGQBNN36B0GZYGTZJR1N)してください。

## 開始する前に

ヒストリカルカウント機能の使用を開始する前に、知っておくべきことがいくつかあります。Amplitudeを初めて使用する場合は、イベントがAmplitudeチャートに表示されるようにインストルメンテーションプロセスを完了する必要があります。最初に[イベントセグメンテーションチャート](https://help.amplitude.com/hc/en-us/articles/360033852251-Event-Segmentation-Getting-Started)を探索することをお勧めします。

この機能について注意する他の重要なこと：

* 次の演算子が現在サポートされています： `<   <=   !=   >   >=`
* 一度に1つのヒストリカルカウントプロパティのみを選択できます。
* ヒストリカルカウントは![amplitude_logo.png](/docs/output/img/jp/amplitude-logo-png.png)、イベント**セグメンテーション**、**ファネル****分析**、**パスファインダー**、**リテンション分析**チャートで利用可能なイベントプロパティです。
	* ファネル分析では、ヒストリカルカウントは、「この順序」に設定されたファネルでのみ機能します。
	* パスファインダーとリテンション分析チャートで最初のイベントにのみヒストリカルカウントフィルタを適用できます。
	* ただし、イベントセグメンテーションとファネル分析を行うときに複数のイベントに適用できます。

## Amplitudeがヒストリカルカウントを定義する方法

一般的に、ヒストリカルカウントはユーザーが特定のイベントを初めて発生させたか、または5回目かを判断できます。 しかし、ここで注意すべきいくつかの制約があります。

Amplitudeの「*N*番目の時間」の定義自体は、分析の日付範囲の開始**から最大1年の**期間を含むように時間制限されています。

例えば、ユーザーが2019年2月20日に`Play Song`イベントを初めて実行し、1ヶ月後の2019年3月20日に再び実行したとしましょう。 **Play Song**イベントのユーザーの`真の`最初のパフォーマンスを含めるには、チャートの日付範囲を**2020年2月19日までに開始**にする必要があります。 チャートが2020年3月1日から2020年3月31日の期間をカバーしている場合、Amplitudeは、2019年3月20日に実行されたイベントを`Play Song`イベントとのユーザーの最初のインタラクションとして扱います。

## ヒストリカルカウントフィルタを適用する

ヒストリカルカウントを適用するには、次のステップに従ってください：

1. イベントモジュールで興味のあるイベントを選択します。 次に、*+ Filter by*をクリックします。
2. *Amplitude Event Properties*までスクロールダウンし、![amplitude_logo.png](/docs/output/img/jp/amplitude-logo-png.png)*ヒストリカルカウント*を選択します*。*
3. 正しい演算子を選択し、関心のある*N*値（1番目から5番目）を指定します。

![historical_count_1.gif](/docs/output/img/jp/historical-count-1-gif.gif)

上記の例では、チャートに3のヒストリカルカウントで`メッセージを送信`イベントを実行したユーザーが含まれます。

## Amplitudeの操作手順のヒストリカルカウント

Amplitudeがイベントにフィルタを適用するたびに、特定の順序で適用されます。 **ヒストリカルカウントフィルタは常に最後に適用されます**。 

このヒストリカルカウントフィルタを例として見てみましょう：

![historical_count_2.png](/docs/output/img/jp/historical-count-2-png.png)

ヒストリカルカウントフィルタが適用された場合、このチャートは、ドイツで3回目のイベントを発生させたユーザー全員（つまり、最初と2番目のインスタンスは世界のどこでも発生した可能性がある）を表示するものでは**ありません**。 代わりに、そのイベントの**ドイツでの3回目のインスタンス**を示しています。言い換えれば、**前の両方のインスタンス**もドイツで実行されています。 ドイツでの3回目だけを示している場合、ユーザーの3回目、8回目、または100回目のイベントである可能性があります。

**注：**グループバイは、ファネル分析、パスファインダー、リテンション分析チャートで選択された最初のイベントに適用されます。 グループバイを適用すると、Amplitudeは、N回目のイベントを発射したときにユーザーのプロパティ値を表示します。

### イベントヒストリカルカウント

イベントヒストリカルカウントフィルタは、ヒストリカルカウントフィルタと非常によく似ています。 両方が特定のアクションを実行するユーザーのN番目のインスタンスをキャプチャしますが、他のすべてのフィルタが適用された**後に**ヒストリカルカウントが適用されます。 対照的に、イベントヒストリカルカウントは、他のフィルタよりも**先****に**適用されます。

これは、分析に重要な意味を持つ場合があります。 下の表を使用して、相違を説明しましょう：

| **時間** | **Mayaのイベント** | **Locのイベント** |
| --- | --- | --- |
| 1 | run |   |
| 2 | walk | walk |
| 3 |   | run |

`次の`任意のイベントを検索するイベントセグメンテーション分析を設定した場合：

* `ヒストリカルカウント` = `1st`
* `イベント名` = `Run`

これは、2つの結果をもたらします：時間1のMayaと時間3のLocです。

対照的に、`次のいずれかを`検索する同様の分析を考えてみましょう：

* `イベントヒストリカルカウント` = `1st`
* `イベント名` = `Run`

これは、時間1のMayaという1つの結果を提供します。これは、`run`がLocの**2番目の**イベントであり、イベントヒストリカルカウントが最初のイベントを除くすべてをフィルタリングするためです。

## ファネル分析でヒストリカルカウント

ファネル分析チャートでは、ユーザーは、ファネルを複数回入力するか、さまざまなステップを複数回実行できます。 ユーザーが、ヒストリカルカウントフィルタを使用したファネル分析チャートでコンバージョンされたかどうかを決定するために、Amplitudeは2つのことを考慮します。 

1. この*N*番目のインスタンスは、日付ピッカー日付以内でなければなりません。また
2. この*N*番目のインスタンスは、他のファネルステップの[コンバージョンウィンドウ](https://help.amplitude.com/hc/en-us/articles/360052745632)内で発生する必要があります。

例として、2ステップファネルを想像しましょう。 イベントAでヒストリカルカウントフィルタを2に設定しました。2020年12月21日から2020年12月22日の日付範囲です。 ファネルは次のとおりです：

ステップ1 = イベントA

ステップ2 = イベントB

そして、ユーザーは、BBABABの順序でイベントを実行しました。

ここで、コンバージョンとしてカウントするために、ユーザーは、指定された日付範囲（2020年12月21日と22日）でイベントAの2番目のインスタンスを発行し、**さらに**イベントAのコンバージョンウィンドウ内でイベントBを実行する必要があります。

代わりに、2のヒストリカルカウントフィルタを2番目のイベント（他のすべてが等しい）に適用すると、ユーザーは次の場合にコンバージョンとしてカウントされます：

* イベントAの**発生**は、指定された時間枠内です。
* イベントBの**2番目の**発生は、指定された時間枠内です。
* イベントA（指定された時間枠内のもの）は、イベントBの2番目の発生**の前に**実行されました。

**注意：**[同じ](https://help.amplitude.com/hc/en-us/articles/360040957432-Historical-Count-Number-of-Times-an-event-was-Performed-)秒内に発生する同じイベントに*ヒストリカルカウント**フィルタを使用している場合、*ユーザーはドロップオフしたように見えます。 これは、[ファネルクエリ](https://help.amplitude.com/hc/en-us/articles/360039567812#h_d7bd17e2-f4fc-4396-afce-78b0a13603dd)が同じ秒内に起こるイベントを区別しないためですが、ヒストリカルカウントフィルタは区別します。 

## 行動コホートにおけるヒストリカルカウント

ヒストリカルカウントと行動コホートは、Amplitudeでは関連していますが、異なる概念です。 行動コホートは、特定の時間枠内で特定の頻度で特定のアクションを行ったユーザーのグループを定義するために使用できます。例えば、過去30日間に5回トレーニングを完了したユーザーです。 フィットネス企業は、どのユーザーがこの説明に合うかを知りたいかもしれません。最近のパワーユーザーの定義かもしれないからです。

逆に、ヒストリカルカウントでは、ユーザーの5番目のワークアウトをピンポイントできます。 したがって、過去30日間に2つのトレーニングのみを完了したが、その前に3つのトレーニングを完了した場合、最新のトレーニングは、実際には5番目でした。 これは、ユーザーの5番目のワークアウト全体が、全体的なユーザーライフサイクルで重要なマイルストーンをマークするためである。 これは、ユーザーの5番目のワークアウト全体が、全体的なユーザーライフサイクルで重要なマイルストーンをマークするためである可能性があるため、重要な区別です。

Amplitudeは、条件としてヒストリカルカウントとコホートを作成することで、ユーザーは両方の力を組み合わせることができます。 時間の経過とともにコホート人口を見ることができます。

行動コホートにヒストリカルカウントを追加するには、[Amplitudeで行動コホートの作成](https://help.amplitude.com/hc/en-us/articles/231881448)に関するヘルプセンターの記事を参照してください。

## ヒストリカルカウントとカスタムイベント

カスタムイベントロジックは、ヒストリカルカウントフィルタの前に考慮され、ユーザーによってトリガーされた基礎的なイベントをすべてカウントします。

例えば、ユーザーが`event_a`**または**`event_b`**を**トリガーしたときにトリガーされる`custom_event_c`を想像してください。 ユーザーが次の日にイベントをトリガーしたとしましょう：

**1日目：**`event_a`

**3日目：**`event_b`

**7日目：**`event_b`

**14日目：**`event_a`

この時間枠内で1のヒストリカルカウントフィルタを`custom_event_c`に適用すると、**event\_a**がその日に初めてトリガーされたため、ユーザーは`1日目`のデータポイントでカウントされます。 **3**日目、**7**日目、**14**日目にトリガーされたユーザーのイベントは、それらの日にはカウントされません。

custom\_event\_cに`2のヒストリカルカウントフィルタを適用すると`、ヒストリカルカウントは、**custom\_event\_c**が2回目にトリガーされた日として`3日目`を登録します。 
