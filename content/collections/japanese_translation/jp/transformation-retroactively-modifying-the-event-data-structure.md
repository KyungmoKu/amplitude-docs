---
id: 6added34-c611-44b0-914b-07ba04f6c974
blueprint: japanese_translation
title: 変換：イベントデータ構造を遡及的に変更する
title_en: 'Transformation: Retroactively modifying the event data structure'
source: 'https://help.amplitude.com/hc/ja/articles/5913315221915'
---
#### この記事のテーマ：

* 変換の主な種類を理解し、作成する
* 変換を編集および管理する

Amplitude Dataの**変換**機能では、一般的な実装ミスを修正するためにイベントデータを変換することができます。変換は、遡及的に行われます。いつでも作成し、すべての履歴データに適用できます。つまり、基礎となるコードベースに触れることなく、イベントデータに変更を加えることができます。間違いに気づいたり、変更したくなったりすればいつでも、過去と未来の両方で影響を受けるすべてのデータを、変換を使用して修正できます。

現在、Amplitudeのデフォルトユーザープロパティの変換はサポートされていません。

変換は、プロジェクトの`メイン`ブランチでのみ実行できます。*[Show transformations]*（変換を表示）トグルが`オン`に設定されていることを確認してください。

**注意**：変換は、チャートまたはコホートが結果を生成するクエリ時間に適用されます。**これは、生データには影響しません。**SnowflakeまたはRedshiftの生データは変換による影響を受けません。

## イベント、イベントプロパティ、およびユーザープロパティを統合する

多くのAmplitudeユーザーは、余分な、または重複するイベント、イベントプロパティ、ユーザープロパティの整理統合が最終的に必要になります。変換は、このプロセスを容易にします。

### イベントをマージする

この変換により、イベントを統合することが可能になります。2つ以上のイベントを追跡していて、それらを単一のイベントとして追跡したい場合に役立ちます。例えば、イベント`comment_reply_like`と`comment_share`を1つにまとめて、`comment`というイベントにすることができます。

イベントを統合する際に、統合した後で元の2つのイベントを区別するのに役立つプロパティを追加することもできます。この変換は、構文が似た2つのイベントでデータのログを取っており、その代わりに同じ情報を異なるプロパティ値を持つ1つのイベントとして記録できる場合に役立ちます。例えば、イベント`comment_reply_like`とイベント`comment_share`を1つのイベント`comment`に変換します。すると、イベント`comment`は、新しいイベントプロパティ`comment type`と、値`reply like`および`share`を持つようになります。

イベントを統合するには、次のステップに従ってください。

1. Amplitude Dataで*[Events]（イベント）に移動します。*
2. 統合したいイベントを見つけて、名前の横にあるチェックボックスをクリックします。
3. イベントが選択されると、*[Transform]*（変換）オプションがイベントリストの上のメニューバーに表示されます。[Transform]（変換）をクリックします。
4. ドロップダウンメニューから、変換を行う環境を選択し、*[Next]*（次へ）をクリックします。
5. 選択したイベントを、1つのイベントに統合するか、区別するプロパティを追加して1つのイベントに統合するかを選択します。*[Next]*（次へ）をクリックします。  
  
![merge_transform.png](/docs/output/img/jp/merge-transform-png.png)
6. *[Transform & Merge Events]*（変換して統合）モーダルのドロップダウンを使用して、**新規**イベントに統合するか、**既存の**別のイベントに統合するかを選択します。新規イベントに統合する場合は、ここで名前を付けます。次に*[Preview]*（プレビュー）をクリックします。
7. 上記ステップ5で、統合後のイベントに区別するためのプロパティを追加**しない**場合は、ステップ9に進みます。  
  
追加する場合は、*[Select Property]*（プロパティを選択）ドロップダウンから、区別するために使用したいイベントプロパティを選択します。*[Next]*（次へ）をクリックします。
8. 次に、ステップ7で選択したプロパティに新しい値を設定して、選択したイベントをマッピングします。*[Property Value…]*（プロパティ値…）フィールドに新しい値を入力して、*[Preview]*（プレビュー）をクリックします。
9. 変更を確認し、*[Merge]*（統合）をクリックして変換を完了します。

### イベントプロパティまたはユーザープロパティを統合する

この変換により、イベントまたはユーザーのプロパティを統合できます。これは、同じ情報を追跡している、異なる構文で名前が付けられた2つのプロパティがある場合に役立ちます。

例えば、あるイベントプロパティが`title`と呼ばれる場合と、`TITLE`と呼ばれる場合があり、すべてのイベントで同じものを表しているとします。`title`と`TITLE`を`Title`に変換し、データを統合することで、整理できます。

同様に、あるユーザープロパティが、全ユーザーに対し同じものを表しているにもかかわらず`name`と呼ばれるときとNAMEと呼ばれるときがある場合は、不明瞭になる可能性があります。`name`と`NAME`を`Name`に変換することによって、混乱する可能性を回避できます。

統合が可能なのは、イベントプロパティと他のイベントプロパティ、ユーザープロパティと他のユーザープロパティのみです。

イベントプロパティまたはユーザープロパティを統合するには、次のステップに従ってください。

1. Amplitude Dataで、*[Properties]*（プロパティ）に移動し、統合したいプロパティの種類によって、*[Event]*（イベント）タブまたは*[User]*（ユーザー）タブを開きます。
2. 統合したいプロパティを見つけて、名前の横にあるチェックボックスをクリックします。イベントプロパティを選択すると、メニューに*[Transform]*（変換）オプションが表示されます。
3. *[Transform]*（変換）ドロップダウンから、*[Merge Property]*（プロパティの統合）を選択します。
4. [Merge Properties]（プロパティの統合）モーダルが表示されます。新規イベントプロパティ名を入力するか、選択したイベントプロパティを統合したいイベントプロパティの名前を入力します。*[Next]*（次へ）をクリックします。
5. 変更を確認し、*[Merge]*（統合）をクリックして変換を完了します。

## プロパティ値を変更する

この変換により、イベントおよびユーザープロパティ値の再割り当てが可能になります。この変換は、プロパティのドロップダウンに多くのスペルミスがあるか、または意味のない値がある場合に役立ちます。また、これにより、UIで非表示にしたり、別の値に変換したりすることができます。

例えば、`true`と`TRUE`の値を`True`に再割り当てすることができます。

プロパティ値を変更するには、次のステップに従ってください。

1. *[Properties]*（プロパティ）に移動し、変更したいプロパティの種類に応じて、[Event]（イベント）または[User]（ユーザー）タブのいずれかを開きます。
2. 変更したいプロパティ値を持つプロパティを見つけて、その名前の横にあるチェックボックスをクリックします。
3. *[Transform]*（変換）ドロップダウンから、*[Rename Value]*（値の名前を変更）を選択します。
4. *[Edit Renamed Values]*（名前を変更した値を編集）モーダルが表示されます。*[Current Property Value]*（現在のプロパティ値）の下で、*[Select value(s)...]*（値を選択…）をクリックします。
5. リストから、名前を変更する値を選択し、*[Apply]*（適用）をクリックします。
6. *[Derived Value]*（派生値）の下で、*[Select value...]*（値を選択...）をクリックして、新しい値を設定します。
7. *[New Value]*（新しい値）をクリックし、表示されるフィールドに新しい値を入力します。
8. 変更したいすべての値に対して、ステップ4～7を繰り返します。次へをクリックします。
9. 確認モーダルが表示されます。*[Rename]*（名前の変更）をクリックします。

## プロパティ値を非表示にする

プロパティ値の非表示設定は、追跡したいが、チャートでダッシュボードに表示したくない場合に役立ちます。プロパティ値を非表示にすると、その生データが削除されず、値はユーザーの個々のイベントストリームに表示されます。

プロパティ値を非表示にするには、次のステップに従ってください。

1. 非表示にしたい値のあるイベントまたはユーザープロパティを見つけます。名前の横にあるボックスをオンにします。
2. *[Transform]*（変換）ドロップダウンから、*[Hide Values]*（値を非表示）を選択します。
3. Amplitudeで非表示にしたい値を選択し、*[Next]*（次へ）をクリックします。
4. 確認モーダルが表示されます。[Hide]（非表示）をクリックします。

## 変換を編集および削除する

変換は永久的ではなく、変更可能です。いつでも編集または削除できます。

変換を編集するには、次のステップに従ってください。

1. 対象となる変換済みのイベント、イベントプロパティ、またはユーザープロパティを見つけます。
2. 変換名をクリックして、詳細パネルを開きます*[Transformed Values]*（変換済みの値）をクリックして変換タブを表示します。
3. 編集したい変換済みの値の横にある*[Edit]*（編集）をクリックし、必要な変更を行い、保存します。

変換を削除するには、次のステップに従ってください。

1. 対象となる変換済みのイベント、イベントプロパティ、またはユーザープロパティを見つけます。
2. 削除したい変換の横にあるチェックボックスをクリックします。
3. *[Undo Transformation]*（変換を元に戻す）をクリックします。
4. 確認モーダルが表示されます。*[Undo Transformation]*（変換を元に戻す）をクリックします。

![undoTransformation.png](/docs/output/img/jp/undotransformation-png.png)

変換済みの値を削除しても、元のイベントは**削除されません**。
