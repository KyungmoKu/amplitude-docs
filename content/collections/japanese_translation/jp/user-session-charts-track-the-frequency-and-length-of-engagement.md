---
id: 768b2145-e739-49f4-8f05-6794dbf99bad
blueprint: japanese_translation
title: ユーザーセッションチャート：エンゲージメントの頻度と長さをトラック
title_en: 'User Session Charts: Track the frequency and length of engagement'
source: 'https://help.amplitude.com/hc/ja/articles/231275508'
---
#### この記事のテーマ：

* ユーザーセッションチャートと他のAmplitudeチャートの違いを理解する
* ユーザーセッション分析を構築する
* 分析結果を解釈する

ユーザーセッションチャートは様々なセッションベースの指標を使ったユーザーの分析に役立ちます。セッションの長さの分布や平均、ユーザーあたりの平均セッション数を表示し、以下のような質問に答えられるようになります。

* ユーザーはどのくらいの頻度であなたのプロダクトとエンゲージしていますか？
* ユーザーがプロダクトとエンゲージしている時間はどのくらいですか？
* これらの指標は他のユーザーセグメントと比較してどうですか？

## 始める前に

ここではAmplitudeのユーザーインターフェースの基本について学習するため、[Amplitudeでのチャートの構築](/docs/analytics/charts/build-charts-add-events)に関する記事をお読みください。また、Amplitudeの便利な用語集も併せてご参照ください。

セッションIDとAmplitudeがセッションをどのようにトラックするかについても[お読みになりたい場合は、](/docs/cdp/sources/instrument-track-sessions)カスタムセッションプロパティの設定に関する指示もあります。

## ユーザーセッションチャートの設定

多くのAmplitudeチャートでは、イベントモジュールを使って分析を構築します。ユーザーセッションチャートにはイベントモジュールがないため、仕様が少し異なります。

![user_sessions_1.png](/docs/output/img/jp/user-sessions-1-png.png)

その代わりに、ユーザーセッション分析は、あなたのプロダクトを使ったセッションの一定の特徴に基づいて**ユーザーをグループ分け**します。

このチャートを使って**セッション中にユーザーが実行したイベント数をカウントする**こともできます。 これによって、丸1日、1週間、1か月といった期間ではなく、特定の活動期間におけるエンゲージメントを評価できます。

### ユーザーセッションチャートを構築

ユーザーセッションチャートを構築するには、以下のステップに従ってください。

1. セッションモジュール（通常はイベントモジュールがある部分）にあるカウントのドロップダウンメニューを使い、ユーザーセッションチャートでセッションを測定するか、セッション内で実行されたイベントを*測定*するかを指定します。  
![user_sessions_2.png](/docs/output/img/jp/user-sessions-2-png.png)
2. **セッション内で実行されたイベントをカウントする場合は**、*+ Add Event*をクリックして、カウントに関心のある特定のイベントを指定します。 セッションを測定する場合は、このステップはスキップします。
3. 次に、このチャートに含まれるためにセッションに表示するイベントを選択します。  
  
![user_sessions_3.png](/docs/output/img/jp/user-sessions-3-png.png)

4. ステップ1で***セッション***を選択した場合は、モジュールとして測定で次のオプションから選択します。

* * * * * **合計セッション：**すべてのユーザー全体のセッションの総数をグラフ化し、間隔内の有効なセッションの総数をカウントすることで計算されます。 （セッションIDがインストルメンテーションされている場合、「valid」は「none」または「-1」以外のIDを持つセッションを意味します。）合計セッションは、非アクティブイベントのみを含むセッションをカウント**しません**。
				* **利用時間：**インターバル内のすべてのセッションの長さの合計をグラフ化します。
				* **ユーザーあたりの平均利用時間**：インターバルごとにセッションの平均利用時間をグラフ化します。インターバル内のすべてのセッションの長さの合計をインターバル内のアクティブユーザーの合計数で割って計算されます。
				* **平均の長さ：**このグラフは、インターバル内のすべてのセッションの長さの合計をインターバル内のセッションの合計数で割って計算した、セッションの長さの平均を示します。
				* **長さ分布：**ヒストグラムでセッション長の分布を表示します。最短と最長のセッションの長さを設定して、分布の形をカスタマイズします。 最小値以上、最大値未満の範囲が含まれます。 上記の例では、5分間のインターバルで、1分間から30分間までのセッションについて、セッションの長さの分布を示しています。
				* **ユーザーあたりの平均：**ユーザーあたりのセッションの平均数をグラフ化します。これは、インターバル内の有効なセッションの総数を同じインターバル内のアクティブユーザーの総数で割って計算されます。

一方、***セッション内で実行されたイベント***を選択した場合は、以下のチャートオプションから選択します。

* * * * **セッションあたりの平均イベント数**：1つのセッションあたりに選択されたイベントが実行された回数の平均をグラフ化します。インターバル（1日、1週間、1か月など）ごとに、1つのセッションでユーザーがイベントを実行した回数が時系列で表示されます。平均的なエンゲージメントを分析する際に活用できます。
				* **全セッションのイベント合計**：選択されたイベントがセッション内で実行された回数の合計をグラフ化します。イベントセグメンテーションで合計を表示する場合と同様に、インターバル内のすべてのセッションにおいてユーザーが特定の行動をとった回数が表示されます。
				* **分布**：選択されたイベントが含まれるセッションの数の分布をグラフ化します。X軸には選択されたイベントが実行された回数の幅が表示され、Y軸は期間内のセッションの数が示されます。この分析では、どのユーザーのセッション内エンゲージメントが最も高く、どのユーザーが最も低いかを示すのに役立ちます。*バケットを設定*をクリックして、各バケットの個々の範囲を次のように設定します：  
				  
				![user_sessions_4.png](/docs/output/img/jp/user-sessions-4-png.png)

5. セグメンテーションモジュールでは、この分析に含めるユーザーセグメントを特定します。 保存済みのセグメントをクリックして*、リストから必要なセグメントを選択することで、保存済み*のセグメントをインポートできます。 セグメントを選択しなければ、Amplitudeはすべてのユーザーを分析対象とする前提からスタートします。
6. 保存済みのユーザーセグメントをインポートしない場合は、プロパティを追加して新しいユーザーセグメントを作成できます。ユーザーセグメントを作成するには、*+ Filter by*をクリックし、含めたいプロパティを選択して、関心のあるプロパティ値を指定します。
7. 既に何らかのアクションを実行したユーザーのみを含めるようにAmplitudeに指示することで、さらに属性を絞り込むこともできます。これを行うには、*+ Performed*をクリックし、関心のあるイベントを選択します。
8. 必要に応じて+ Add Segmentをクリックし、ステップ5から7を繰り返して*別のユーザーセグメントを追加します。*
9. デートピッカ―を使って分析の対象期間を設定します。

* 

**注：**1日よりも長く続くセッションは、分析から除外されます。

## Amplitudeがセッションを記録する3つの方法

Amplitudeはサーバーサイドまたはクライアントサイドでセッションを記録します。さらに、クライアントサイドのセッションにはモバイルとウェブの2種類があります。

* **サーバーサイド：***session\_id*フィールドに値を入れると、HTTP API v2を使ってサーバーサイドでセッションをトラックできます。この*session\_id*値は、セッション開始時からカウントした、エポックからのミリ秒数になります。
* **クライアントサイド（モバイル）：**AmplitudeのモバイルSDKを使っている場合、デフォルトでは直前のイベントから5分以内に実行されたイベントが現在のセッションにカウントされます。初回のイベントの時刻がセッションの開始時刻となり、最後にトリガーされたイベントがセッションの終了時刻となります。 例えば、初回のイベントは「アプリを開く（Open App）」のイベントかもしれません。さらに、Amplitudeは直前のイベントから5分以内に送られたイベントを現在のセッションにカウントします。
* **クライアントサイド（ウェブ）：**AmplitudeのJavaScript SDKを使っている場合、デフォルトでは直前のイベントから30分以内に実行されたイベントが現在のセッションにカウントされます。初回のイベントの時刻がセッションの開始時刻となり、最後にトリガーされたイベントがセッションの終了時刻となります。

さらに、[カスタムセッションプロパティ](/docs/cdp/sources/instrument-track-sessions)を設定することで、最初にイベントをインストルメント化することなくセッションを定義できます。

**注：**イベントとあわせてセッションIDが送られていない場合は、ユーザーセッションチャートにデータのみ表示されます。イベントをセッション外に指定（セッションIDに「-1」の値を割り当て）しない限り、この処理はAmplitudeのSDKによって自動で行われます。ただし、AmplitudeのHTTP APIを使用する場合は、イベントとあわせて`session_id`を明示的に送る必要があります。

## ユーザーセッションチャートにおけるフィルタリング

ユーザーセッションチャートでイベントをフィルタリングするには、いくつかのステップが必要です。 また、ステップの順序を理解することが大切です。

まず、Amplitudeはプロパティフィルターにマッチするイベントをフィルタリングします。 その結果が返されたら、Amplitudeはイベントをセッションにグループ化し、セッションの長さや各セッションで実行されたイベントの数をカウントできるようにします。

言い換えると、プロパティフィルターはセッションフィルターの前に適用されます。 つまり、Amplitudeはそのままのイベントにまずフィルターを適用し、フィルタリングされたイベントにフィルターをかけます。

セッションの長さの計算には、プロパティフィルターのあるイベントのみが考慮されます。

## データテーブル

チャートの下にはセッションデータのテーブルが表示されます。データテーブル内のセグメントの名称をクリックして、グラフに表示されるセグメントを指定できます。*CSVをエクスポート*をクリックすると、テーブルをダウンロードできます。

![breakdown_up.png](/docs/output/img/jp/breakdown-up-png.png)
